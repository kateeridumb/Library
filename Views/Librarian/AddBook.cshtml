@model Book
@using LibraryMPT.Models
@{
    ViewBag.Title = "Добавить книгу";
    Layout = "_Layout";
    var authors = ViewBag.Authors as List<Author> ?? new List<Author>();
    var categories = ViewBag.Categories as List<Category> ?? new List<Category>();
    var publishers = ViewBag.Publishers as List<Publisher> ?? new List<Publisher>();
}

<h2>Добавить книгу</h2>

<form method="post">
    <div class="mb-3">
        <label class="form-label">Название</label>
        <input asp-for="Title" class="form-control" required />
    </div>

    <div class="mb-3">
        <label class="form-label">Автор</label>
        <select asp-for="AuthorID" class="form-select" required>
            <option value="">-- Выберите автора --</option>
            @foreach (var a in authors)
            {
                <option value="@a.AuthorID">
                    @a.FirstName @a.LastName
                </option>
            }
        </select>
    </div>

    <div class="mb-3">
        <label class="form-label">Категория</label>
        <select asp-for="CategoryID" class="form-select" required>
            <option value="">-- Выберите категорию --</option>
            @foreach (var c in categories)
            {
                <option value="@c.CategoryID">@c.CategoryName</option>
            }
        </select>
    </div>

    <div class="mb-3">
        <label class="form-label">Издательство</label>
        <select asp-for="PublisherID" class="form-select">
            <option value="">-- Не выбрано --</option>
            @foreach (var p in publishers)
            {
                <option value="@p.PublisherID">@p.PublisherName</option>
            }
        </select>
    </div>

    <div class="mb-3">
        <label class="form-label">Год издания</label>
        <input asp-for="PublishYear" type="number" class="form-control" min="1" />
    </div>

    <div class="mb-3">
        <label class="form-label">Путь к файлу</label>
        <input asp-for="FilePath" class="form-control" required />
    </div>

    <div class="form-check mb-3">
        <input asp-for="RequiresSubscription" class="form-check-input" />
        <label class="form-check-label">
            Требуется подписка для доступа
        </label>
    </div>

    <button class="btn btn-primary">
        <i class="fas fa-save me-1"></i> Сохранить
    </button>
    <a asp-action="BookManagement" class="btn btn-secondary">
        <i class="fas fa-arrow-left me-1"></i> Назад
    </a>
</form>
